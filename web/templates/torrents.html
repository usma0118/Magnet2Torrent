{% extends "baseTemplate.html" %}

{% block content %}
<style>
  .magnet-icon {
  width: 20px;
  display: block;
}

.seeds {
  color: #99c24d;
}

.seeding {
  color: #99c24d;
}
.downloading {
  color: #4d59c2;
}
.pending {
  color: #6d6d70;
}
.leechers {
  color: #c62328;
}
.badge {
  background-color: #c62328;
  margin-left: 10px;
}
</style>
<div class="field">
    <form action="/">
      <label class="label">Search:</label>
      <div class="control">
        <input type="hidden" id="website_source" name="website_source" value="<%= website_source %>" />
        <input value="" id="term" name="term" class="input is-medium" type="text" placeholder="Name search">
      </div>
    </form>
  </div>
  
  <table class="table is-striped is-fullwidth is-hoverable">
    <thead>
      <tr>
        <th></th>
        <th>Name</th>
        <th>Size</th>
        <th>Status</th>
        <th>Progress</th>
      </tr>
    </thead>
    <tbody>
      {% for torrent in torrents %}
        <tr>
          <td>
            <a href="{{ torrent.magnet_url }}">
              <img class="magnet-icon" src="{{ url_for('static',filename='images/magnet-icon.png')}}" />
            </a>
          </td>          
          <td>
            <a href="{{ torrent.id }}" class='{{ torrent.status }}'>{{ torrent.name }} {%- if torrent.stalled and torrent.progress < 100 -%}<span class="badge">Stalled</span>{%-endif-%}{%- if torrent.isPrivate -%}<span class="badge">Private</span>{%-endif-%}</a>
          </td>
          <td>{{ torrent.size }}</td>
          <td {{ 'class=leechers' if torrent.stalled and torrent.progress < 100 else 'class=seeds' }}>{{ torrent.progress }}%</td>
          <td>{{ torrent.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
  </table>
{% endblock %}